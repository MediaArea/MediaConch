---
layout: default
permalink: /demo.html
title: "MediaConch Demo"
---

# MediaConch Test Demonstrations

- [Description](#description)
- [General Conformance with FFmpeg-generated Matroska and FFV1 file](#general-conformance-with-ffmpeg-generated-matroska-and-ffv1-file)
- [Standards Mismatch](#standards-mismatch)
- [Testing multiple like files](#testing-multiple-like-files)
- [Quicktime and v210 to Matroska and FFV1](#quicktime-and-v210-to-matroska-and-ffv1)
- [Preservation Master File recommended specifications](#preservation-master-file-recommended-specifications)

### Description

This section of MediaConch is designed to demonstrate various features of conformance checking. Sample files and conformance check policies have been provided with each test. In some instances, an FFmpeg command is provided to create additional test files. 

#### General Conformance with FFmpeg-generated Matroska and FFV1 file

Description: This test demonstrates running a conformance check on a Matroska file with the FFV1 video codec generated by FFmpeg. The associated conformance checking policy contains the following rules:

- General Format equals Matroska
- General UniqueID exists
- General FrameRate is 25 fps (25.000)
- Video Format is FFV1
- Video DisplayAspectRatio is 4:3 (1.333)

Test File: Using the following FFmpeg command, a tester can create a file

`ffmpeg -f lavfi -i testsrc -t 1 -c:v ffv1 -level 1 -t 1 General_Conformance.mkv`

Test File: [General Conformance MKV](files/General_Conformance.mkv)

XSL Policy: [General Conformance XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/General_Conformance.xsl)

To test, run the following test file with the associated policy document:

`mediaconch -mi -fx General_Conformance.mkv -p General_Conformance.xsl`

#### Standards Mismatch

Description: This test demonstrates running policies designed for strict conformance to a particular video standard (NTSC or PAL) against a test file that has the characteristics of both. As a result, testing both associated policy tests will cause a failure. This test also demonstrates running more than one policy document on a single file. 

Test File: Using the following FFmpeg command, a tester can create a file which features a PAL Video Width/Height with an NTSC Video FrameRate: 

`ffmpeg -f lavfi -i testsrc=s=720x576:r=30000/1001 -t 1 -c:v ffv1 -g 1 -level 3 Standards_Mismatch.mkv`

Test File: [Standards Mismatch MKV](files/Standards_Mismatch.mkv)

XSL Policy: [Standards Mismatch PAL XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/Standards_Mismatch_PAL.xsl)

This policy includes the following rules:

- Video FrameRate equals 25 fps (25.000)
- Video Width is equal to 720 (pixels)
- Video Height is equal to 576 (pixels)

XSL Policy: [Standards Mismatch NTSC XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/Standards_Mismatch_NTSC.xsl)

This policy includes the following rules:

- Video FrameRate equals 29.97 fps (29.970)
- Video Width is equal to 720 (pixels)
- Video Height is equal to 480 (pixels)

To test each policy individually, a tester can use either of the following commands:

`mediaconch -mi -fx Conflicting_Tests.mkv -p Conflicting_Tests_NTSC.xsl`

`mediaconch -mi -fx Conflicting_Tests.mkv -p Conflicting_Tests_PAL.xsl`

A user may also testing one file against both policies using the following command:

`mediaconch -mi -fx Conflicting_Tests.mkv -p Conflicting_Tests_NTSC.xsl -p Conflicting_Tests_PAL.xsl`

#### Testing multiple like files

Description: This test demonstrates checking multiple like files for conformance using the same policy. In this case, the files tested are meant to be identical. However, the third test file (Testing_Multiple_Files_3.mkv) contains the incorrect specified color space (YUV). The resulting test produces a failed or NOT VALID result due to the third file being manipulated. 

Test File 1: [Testing Multiple Files MKV](files/Testing_Multiple_Files_1.mkv)
Test File 2: [Testing Multiple Files MKV](files/Testing_Multiple_Files_2.mkv)
Test File 3: [Testing Multiple Files MKV](files/Testing_Multiple_Files_3.mkv)

XSL Policy: [Testing Multiple Files XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/Testing_Multiple_Files.xsl)

To test, run the following test file on a command line interface with the associated test files and policy document:

`mediaconch -mi -fx Test2_0.mkv Test2_1.mkv Test2_2.mkv Test2_3.mkv -p Testing_Multiple_Files.xsl`

#### Quicktime and v210 to Matroska and FFV1 

Description: This test is used to validate Matroska/FFV1 files transcoded from 10-bit uncompressed (v210) QuickTime files originally made for digitally reformatting analog NTSC BetacamSP video. Such a transcoding workflow is becoming increasingly common for institutions who want to take advantage of FFV1's lossless compression and size benefits.  

This policy contains the following rules:

- General Format equals Matroska
- General Format_Version is Version 4
- General Duration is greater or equal than 1 KiB
- General Duration is greater or equal than 1 ms
- Video Format is FFV1
- Video Format_Version is greater or equal than 1
- Video CodecID is equal to FFV1
- Video Duration is greater or equal than 1 ms
- Video Width is equal to 720 (pixels)
- Video Height is equal to 486 (pixels)
- Video DisplayAspectRatio is 4:3 (1.333)
- Video FrameRate_Mode is Constant (CFR)
- Video FrameRate equals 29.97 (fps)
- Video Standard is NTSC
- Video ColorSpace is YUV
- Video ChromaSubsampling is 4:2:2
- Video BitDepth equals 10-bit
- Video Compression_Mode equals Lossless
- Audio Format equals Pulse Code Modulation (PCM)
- Audio CodecID is A_PCM
- Audio Duration is greater or equal than 1 ms
- Audio BitRate_Mode is Constant (CBR)
- Audio Channels equals 4
- Audio SamplingRate equals 48 (kHz)
- Audio BitDepth equals 16-bit

Test File: [QuickTime v210 to Matroska FFV1 MKV](files/QTv210_to_MKVffv1.mkv)

XSL Policy: [QuickTime v210 to Matroska FFV1 XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/QTv210_to_MKVffv1.xsl)

To test, run the following test file on a command line interface with the associated test files and policy document:

`mediaconch -mi -fx QTv210_to_MKVffv1.mkv -p QTv210_to_MKVffv1.xsl`

#### Preservation Master File recommended specifications

Description: This test is used to validate recommended preservation master file format specifications described in the resource, "Digitizing Video for Long-Term Preservation: An RFP Guide and Template" by the Barbara Goldsmith Preservation & Conservation Department, New York University Libraries, published in 2013. Preservation master file specifications in both QuickTime and Matroska formats are pesented here. 

This resource is available [here](https://library.nyu.edu/preservation/VARRFP.pdf). 

Test File (QuickTime): [Preservation Master File recommended specifications - QuickTime MOV](files/NYULibraries_QTv210.mov)

XSL Policy (QuickTime): [Preservation Master File recommended specifications - QuickTime XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/NYULibraries_QTv210.xsl)

To test, run the following test file on a command line interface with the associated test files and policy document:

`mediaconch -mi -fx NYULibraries_QTv210.mov -p NYULibraries_QTv210.xsl`

Test File (Matroska): [Preservation Master File recommended specifications - Matroska MKV](files/NYULibraries_MKVFFV1.mkv)

XSL Policy (Matroska): [Preservation Master File recommended specifications - Matroska XSL](https://raw.githubusercontent.com/MediaArea/MediaConch_SourceCode/master/Source/Resource/policies/NYULibraries_MKVFFV1.xsl)

To test, run the following test file on a command line interface with the associated test files and policy document:

`mediaconch -mi -fx NYULibraries_KMVFFV1.mkv -p NYULibraries_KMVFFV1.xsl`



